# HexiRules 🔬

A hexagonal cellular automaton simulator with a Tkinter grid and an ASCII control panel, using a custom HexiDirect symbolic rule system with directions, macros, and conditions.

![Python](https://img.shields.io/badge/python-v3.8+-blue.svg)
![License](https://img.shields.io/badge/license-MIT-green.svg)

> Disclaimer: Almost all code in this project was generated by ChatGPT/Codex and GitHub Copilot.

## ✨ Features

- Hexagonal grid with 6 neighbors per cell
- HexiDirect symbolic rules with directions, macros (%), conditions `[ ... ]`, negation, and pointing shorthand
- Tkinter grid renderer with an ASCII control panel
- Each step first selects all matching rules per cell, then applies one at random
- Unified quality checker (MyPy, Black check, unit tests)

## 🚀 Quick Start

### Prerequisites
- Python 3.8 or higher
- Node.js 20+ (for web build checks)
- No external dependencies (uses only standard library)

### Installation & Running

```bash
# Clone the repository
git clone <repository-url>
cd HexiRules

# Create virtual environment (recommended)
python -m venv .venv
.venv/Scripts/activate

# Run the GUI
python src/main.py

# Optional: run the quality checks
python tools/check_quality.py
```

## 🎮 How to Use

1. Launch the GUI: `python src/main.py`. The grid appears in a window and the control panel runs in the terminal.
2. Use the ASCII panel to manage worlds, edit rules, and step the simulation.
3. Edit cells in the canvas: Left=cycle state; Right=cycle direction (1..6,None); Middle=clear.
4. Use Step to apply rules once. Save and load worlds as JSON through the ASCII panel.

## 🧪 Development

### Running Tests
```bash
# Unified quality checker (type check, format check, tests)
HEXIRULES_NO_GUI=1 python tools/check_quality.py

# Or run tests directly
python tools/run_tests.py --no-gui
```

### VS Code Setup
The project includes VS Code configuration for:
- Debugging (`F5`)
- Test discovery and execution
- Python environment management

## 📐 Architecture

```
HexiRules/
├── src/
│   ├── main.py              # Application entry (creates GUI)
│   ├── gui.py               # Tkinter GUI
│   ├── ascii_ui.py          # ASCII control panel
│   ├── domain/hexidirect/   # HexiDirect symbolic engine
│   ├── hex_examples.py      # Example rule sets
│   ├── cli.py               # CLI entry
│   └── version.py
├── tests/                   # Unit tests
├── tools/
│   ├── run_tests.py         # Test discovery/runner
│   └── check_quality.py     # MyPy, Black check, tests
├── docs/                    # Project documentation
│   ├── README.md
│   └── hex_rule_notation.md
├── requirements.txt
├── requirements-dev.txt
├── pyproject.toml
└── README.md
```

## 🔬 Hexagonal vs Square Grids

Traditional cellular automata use square grids where each cell has 8 neighbors. Hexagonal grids offer:
- **6 neighbors per cell**: More natural and symmetric neighbor relationships
- **No diagonal bias**: All neighbors are equidistant
- **Biological relevance**: Many natural structures follow hexagonal patterns

## 🎯 Rule Examples

- HexiDirect examples:
   - `t[-a] => t%` (t persists, possibly reorients)
   - `_[t.] => a` (empty becomes a when any neighbor t points to it)
   - `t%[a] => t` (directional t near a remains t)

## 🤝 Contributing

1. Fork the repository
2. Create a feature branch
3. Add tests for new functionality
4. Ensure all tests pass
5. Submit a pull request

## 📄 License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

---
Current state: The GUI uses stacked panels (no tabs), HexiDirect is the default mode with a compact switcher, the canvas auto-scales, and worlds can be saved/loaded as JSON. Engines and parsing features are covered by unit tests and a consolidated quality checker.

